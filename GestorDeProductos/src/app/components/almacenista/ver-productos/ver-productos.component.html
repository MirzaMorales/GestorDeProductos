
<!-- Cards de productos -->
<div class="product-cards">
    <div *ngFor="let producto of productos" class="product-card">
        <img [src]="producto.imagenUrl" alt="{{ producto.nombreProducto }}">
        <h3>{{ producto.nombreProducto }}</h3>
        <p>Categoría: {{ producto.categoria }}</p>
        <p>Stock: {{ producto.stockExhibe }}</p>

        <!-- Contenedor de botones -->
        <div class="button-container">
            <button (click)="openEditDialog(producto)">Editar</button>
            <button (click)="deleteProducto(producto._id)">Eliminar</button>
            <button (click)="viewExistencias(producto._id)">Ver existencias</button>
        </div>
    </div>
</div>



<div *ngIf="isEditDialogOpen" class="edit-dialog">
    <div class="dialog-content">
        <h2>Editar Producto</h2>
        <form (ngSubmit)="updateProducto()">
            <!-- Primera columna -->
            <label for="nombreProducto">Nombre</label>
            <input type="text" id="nombreProducto" [(ngModel)]="currentProducto.nombreProducto" name="nombreProducto">

            <label for="codigoBarras">Código de barras</label>
            <input type="text" id="codigoBarras" [(ngModel)]="currentProducto.codigoBarras" name="codigoBarras">

            <label for="tamano">Tamaño</label>
            <input type="text" id="tamano" [(ngModel)]="currentProducto.tamano" name="tamano">

            <label for="marca">Marca</label>
            <input type="text" id="marca" [(ngModel)]="currentProducto.marca" name="marca">

            <!-- Segunda columna -->
            <label for="imagenUrl">Imagen URL</label>
            <input type="text" id="imagenUrl" [(ngModel)]="currentProducto.imagenUrl" name="imagenUrl">

            <label for="categoria">Categoría</label>
            <input type="text" id="categoria" [(ngModel)]="currentProducto.categoria" name="categoria">

            <label for="precioPieza">Precio por pieza</label>
            <input type="number" id="precioPieza" [(ngModel)]="currentProducto.precioPieza" name="precioPieza">

            <label for="precioCaja">Precio por caja</label>
            <input type="number" id="precioCaja" [(ngModel)]="currentProducto.precioCaja" name="precioCaja">

            <!-- Tercera columna (Cantidad por caja ocupa una fila completa) -->
            <label for="cantidadPiezasPorCaja">Cantidad por caja</label>
            <input type="number" id="cantidadPiezasPorCaja" [(ngModel)]="currentProducto.cantidadPiezasPorCaja" name="cantidadPiezasPorCaja">

            <!-- Botones alineados al centro -->
            <div class="dialog-buttons">
                <button type="submit" class="save-button">Guardar cambios</button>
                <button type="button" class="cancel-button" (click)="closeEditDialog()">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<!-- Cuadro de diálogo para Ver Existencias -->
<!-- Cuadro de diálogo de existencias -->
<div *ngIf="isExistenciasDialogOpen" class="existencias-dialog">
    <div class="dialog-content">
      <h2>Actualizar Existencias</h2>
      <form (ngSubmit)="actualizarStock()">
        
        <label for="codigoBarras">Código de Barras</label>
        <input type="text" id="codigoBarras" [(ngModel)]="productoExistencias.codigoBarras" name="codigoBarras" readonly>
  
        <label for="nombreProducto">Nombre del Producto</label>
        <input type="text" id="nombreProducto" [(ngModel)]="productoExistencias.nombreProducto" name="nombreProducto" readonly>
  
        <label for="cantidadSeleccionada">Cantidad a Restar</label>
        <input type="number" id="cantidadSeleccionada" [(ngModel)]="productoExistencias.cantidadSeleccionada" name="cantidadSeleccionada">
  
        <div class="dialog-buttons">
          <button type="submit" class="save-button">Actualizar Stock</button>
          <button type="button" class="cancel-button" (click)="closeExistenciasDialog()">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
  






